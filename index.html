<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D –ò–≥—Ä–∞–ª—å–Ω—ã–π –ö—É–±–∏–∫</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f5f5dc;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        .scene {
            width: 200px;
            height: 200px;
            perspective: 1000px;
            margin-bottom: 30px;
        }

        .cube {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 3s cubic-bezier(0.17, 0.84, 0.44, 1);
        }

        .cube-face {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 2px solid rgba(139, 69, 19, 0.5);
            border-radius: 15px;
            background: linear-gradient(145deg, #8B0000, #A52A2A);
            box-shadow: 0 0 20px rgba(139, 0, 0, 0.4);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 40px;
            color: white;
            backface-visibility: visible;
        }

        /* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –∫—É–±–∏–∫–∞ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */

        .result {
            margin-top: 25px;
            font-size: 28px;
            font-weight: bold;
            color: #8B0000;
            height: 40px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .result.show {
            opacity: 1;
            transform: translateY(0);
        }

        @keyframes wobble {
            0% { transform: rotateX(0) rotateY(0); }
            15% { transform: rotateX(10deg) rotateY(5deg); }
            30% { transform: rotateX(-5deg) rotateY(10deg); }
            45% { transform: rotateX(5deg) rotateY(-5deg); }
            60% { transform: rotateX(-5deg) rotateY(5deg); }
            75% { transform: rotateX(5deg) rotateY(-5deg); }
            100% { transform: rotateX(0) rotateY(0); }
        }
        
        .site-link {
            margin-top: 20px;
            font-size: 18px;
            color: #8B0000;
            text-decoration: none;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease 0.3s, transform 0.5s ease 0.3s, color 0.3s;
        }
        
        .site-link.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .site-link:hover {
            color: #A52A2A;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="scene">
        <div class="cube" id="cube">
            <!-- –ì—Ä–∞–Ω–∏ –∫—É–±–∏–∫–∞ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
        </div>
    </div>

    <button id="rollButton">–ë—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫</button>
    <div class="result" id="result"></div>
    <a href="https://vk.com/stipendiat_pm" class="site-link" id="vkLink">–£—Ä–∞! –¢—ã –ø–æ–ª—É—á–∏–ª –¥–æ—Å—Ç—É–ø –∫ –Ω–∞—à–µ–º—É –í–ö-—Å–æ–æ–±—â–µ—Å—Ç–≤—É! –ë—ã—Å—Ç—Ä–µ–µ –∫–ª–∏–∫–∞–π —Å—é–¥–∞!</a>

    <script>
        const cube = document.getElementById('cube');
        const rollButton = document.getElementById('rollButton');
        const resultDisplay = document.getElementById('result');
        const vkLink = document.getElementById('vkLink');
        let isRolling = false;
        let animationId;

        const outcomes = [
            { x: 0, y: 0, value: 1 },
            { x: 0, y: 180, value: 2 },
            { x: 0, y: 90, value: 3 },
            { x: 0, y: -90, value: 4 },
            { x: 90, y: 0, value: 5 },
            { x: -90, y: 0, value: 6 }
        ];

        function getRandomRotation() {
            return {
                x: Math.floor(Math.random() * 360 * 5) + 360 * 2,
                y: Math.floor(Math.random() * 360 * 5) + 360 * 2,
                z: Math.floor(Math.random() * 360 * 3)
            };
        }

        function rollCube() {
            if (isRolling) return;
            
            isRolling = true;
            resultDisplay.textContent = '–¢—ã –ø–æ–±–µ–¥–∏–ª! ü•≥';
            resultDisplay.classList.remove('show');
            vkLink.classList.remove('show');
            
            const spinDuration = 3000;
            const startTime = performance.now();
            const randomRot = getRandomRotation();
            const targetOutcome = outcomes[Math.floor(Math.random() * outcomes.length)];
            
            function animate(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / spinDuration, 1);
                
                if (progress < 1) {
                    const easing = 1 - Math.pow(1 - progress, 3);
                    const currentX = randomRot.x * (1 - easing) + targetOutcome.x * easing;
                    const currentY = randomRot.y * (1 - easing) + targetOutcome.y * easing;
                    
                    cube.style.transform = `rotateX(${currentX}deg) rotateY(${currentY}deg)`;
                    animationId = requestAnimationFrame(animate);
                } else {
                    cube.style.transform = `rotateX(${targetOutcome.x}deg) rotateY(${targetOutcome.y}deg)`;
                    isRolling = false;
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞–¥–ø–∏—Å–∏ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
                    setTimeout(() => {
                        resultDisplay.classList.add('show');
                        setTimeout(() => {
                            vkLink.classList.add('show');
                        }, 300);
                    }, 100);
                    
                    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–∫–∞—á–∏–≤–∞–Ω–∏—è –∫—É–±–∏–∫–∞
                    cube.style.animation = 'wobble 0.5s ease';
                    setTimeout(() => {
                        cube.style.animation = '';
                    }, 500);
                }
            }
            
            animationId = requestAnimationFrame(animate);
        }

        rollButton.addEventListener('click', rollCube);

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        setTimeout(() => {
            cube.style.transform = 'rotateX(15deg) rotateY(-15deg)';
        }, 500);
    </script>
</body>
</html>
